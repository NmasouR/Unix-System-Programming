Νικόλαος Μασούρας
1115201800112
ΣυσΠρο Εργασία 1

1.Compile & Run
Για να γίνει compile η εφαρμογή πρέπει να τρέξετε την εντολή: make
Για το άνοιγμα της εφαρμογής:
./vaccineMonitor -b bloomSize -c inputFile ή
./vaccineMonitor -c inputFile -b bloomSize
όπου bloomSize το μέγεθος του bloom filter σε bytes
Για το bash script:
./testFile.sh virusesFile countriesFile numLines duplicatesAllowed
όπου numLines ο αριθμός γραμμών που θα έχει το file που θα φτιαχτεί και duplicatesAllowed 0 ή 1

2.Δομές Δεδομένων
Αρχικά κάθε φορα που γίνεται εισαγωγή νέου citizen (δηλαδή citizen με ID που δεν έχει εισαχθεί ήδη στην εφαρμογή)
,είτε από το αρχείο είτε από εντολή,αυτός αποθηκεύετε σε λίστα από citizenNodes.
Επίσης κάθε φορά που η εφαρμογή εντοπίζει νέα χώρα κατά την εισαγωγή πολιτών αυτή αποθηκεύετε σε λίστα απο countryNodes.
Εντοπίζουμε από ποιά χώρα είναι ο κάθε πόλιτης έχοντας ένα δείκτη στο citizenNode του πολίτη που δείχνει στο κατάλληλο countryNode.
Παρόμοια κάθε φορά που η εφαρμογή εντοπίζει νέο ιό κατά την εισαγωγή πολιτών αυτός αποθηκεύετε σε λίστα απο virusNodes.
Κάθε virusNode έχει δείκτες σε 2 skiplists, για vaccinated_persons και non_vaccinated_persons για τον συγκεκριμένο ιό,
και στο bloom filter του ιού.
Οι skiplists υλοποιούνται εισάγωντας ένα αντίγραφο skipnode σε κάθε επίπεδο της για όσα επίπεδα έχει ήδη προσδοιοριστεί ότι
θα έχει το συγκεκριμένο skipnode.
Σε κάθε skipnode υπάρχει ένας δείκτης ο οποίος δείχνει στο citizenNode το οποίο σχετίζεται με το ID του skipnode.
Έτσι συνολικά η εφαρμογή αποτελείται απο 3 λίστες για citizens,countries,viruses, viruses*2 στον αριθμό skiplists 2 για κάθε ιό
και viruses στον αριθμό bloom filters ένα για κάθε ιό.

3.Εντολές
Οι ημερομηνίες όπου χρειάζονται πρέπει να είναι της μορφής dd-mm-yyyy και η ημέρα να ανήκει στο σύνολο [01,30] ο μήνας στο [01,12] και η χρονιά
στο [1950,2021]
Η /populationStatus μπορεί να μην δέχεται ημερομηνίες σαν παράμετρο αλλά αν δέχεται μια πρέπει να υπάρχει και η δεύτερη.
Επίσης μπορεί να δεχτεί ως είσοδο πρώτα την μικρότερη ημερομηνία ή το αντίστροφο.
Η παράμετρος της χώρας είναι επίσης προαιρετική.
Τα ίδια ισχύουν και για την /popStatusByAge.
Νέος ιός μπορεί να εισαχθεί στις /insertCitizenRecord και /vaccinateNow ενώ στις υπόλοιπες εντολές αν δεν υπάρχει εκτυπώνεται
μήνυμα λάθους.
Το παραπάνω ισχύει και για τις χώρες.

4.Bash Script
Αν η παράμετρος numLines είναι μεγαλύτερη από 10000 και η dublicatesAllowed είναι 0 εκτυπώνεται μήνυμα λάθους και σταματάει το
script καθώς δεν μπορεί να δημιουργήσει μοναδικά ID.
Επειδή το script δημιουργεί IDs τυχαία αν η dublicatesAllowed είναι 0 και η numLines αρκετά μεγάλη η δημιουργία του inputFile θα καθυστερήσει.
Η πιθανότητα ύπαρξης ημερομηνίας σε κάθε γραμμή είναι ίση με την πιθανότητα να μην υπάρχει ημερομηνία.
Δεν δημιουργείται inconsistency τύπου να υπάρχει NO με ημερομηνία.
Κάθε γραμμή στο inputFile με κοινό ID έχει επίσης κοινό firstname,lastname,country,age.